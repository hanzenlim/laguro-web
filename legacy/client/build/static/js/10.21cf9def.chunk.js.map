{"version":3,"sources":["../static/js/10.21cf9def.chunk.js","../node_modules/@material-ui/icons/Delete.js","../node_modules/@material-ui/icons/utils/createSvgIcon.js","components/UploadDocuments/queries.js","components/UploadDocuments/UploadHealthInsurance.js"],"names":["webpackJsonp","1205","module","exports","__webpack_require__","_interopRequireDefault","Object","defineProperty","value","default","_react","_createSvgIcon","_default","createElement","d","1206","createSvgIcon","path","displayName","Icon","props","_SvgIcon","_pure","muiName","1207","__webpack_exports__","queryPatientDocumentQuery","saveUploadedImagesUrlQuery","createPatientDocumentQuery","getFileStackPolicySignature","986","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_taggedTemplateLiteral","strings","raw","freeze","defineProperties","UploadHealthInsurance","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_react_redux__","__WEBPACK_IMPORTED_MODULE_3_filestack_react__","__WEBPACK_IMPORTED_MODULE_3_filestack_react___default","__WEBPACK_IMPORTED_MODULE_4_styled_components__","__WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete__","__WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete___default","__WEBPACK_IMPORTED_MODULE_6__common__","__WEBPACK_IMPORTED_MODULE_7__queries__","__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__","__WEBPACK_IMPORTED_MODULE_9__config_keys__","_createClass","target","descriptor","protoProps","staticProps","_templateObject","_templateObject2","_templateObject3","StyledDeleteIcon","div","StyledImageContainer","StyledUploadedImage","img","_Component","_this2","_this","getPrototypeOf","extractUrlToState","_ref","a","mark","_callee","result","uploadImages","signedUrlArr","urlArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","generatedSignedUrl","wrap","_context","prev","next","filesUploaded","concat","state","undefined","Symbol","iterator","generateImageSignature","url","sent","push","t0","return","finish","setState","stop","_x","deleteImage","e","imageindex","currentTarget","dataset","tempSignedUrl","tempUrl","splice","handleSubmit","_callee2","auth","patientDocResponse","id","response","params","_context2","input","partitionKey","partitionValue","data","queryPatientDocument","patientId","healthInsuranceImages","errors","alert","uploadPolicySignature","isLoading","componentDidMount","_ref3","_callee3","patientDocuments","uploadFileStackKeys","_context3","getPatientDocuments","getUploadPolicySignature","assign","componentDidUpdate","_ref4","_callee4","_context4","_ref5","_callee5","policySignature","_context5","type","abrupt","getViewPolicySignature","_x2","_ref6","_callee6","handle","viewPolicySignature","_context6","_x3","_ref7","_callee7","patientDocument","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","obj","_context7","_x4","_ref8","_callee8","_context8","split","policy","signature","_this3","map","data-name","src","alt","data-imageindex","onClick","style","fontSize","pt","fontWeight","color","renderUploadedImages","apikey","security","options","accept","imageMin","maxFiles","fromSources","storeTo","location","onSuccess","render","_ref9","onPick","mapStateToProps"],"mappings":"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","file":"static/js/10.21cf9def.chunk.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 1205:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _interopRequireDefault = __webpack_require__(0);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _createSvgIcon = _interopRequireDefault(__webpack_require__(1206));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"g\", null, _react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n})), 'Delete');\n\nexports.default = _default;\n\n/***/ }),\n\n/***/ 1206:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _interopRequireDefault = __webpack_require__(0);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(__webpack_require__(1));\n\nvar _pure = _interopRequireDefault(__webpack_require__(27));\n\nvar _SvgIcon = _interopRequireDefault(__webpack_require__(21));\n\nfunction createSvgIcon(path, displayName) {\n  var Icon = function Icon(props) {\n    return _react.default.createElement(_SvgIcon.default, props, path);\n  };\n\n  Icon.displayName = displayName;\n  Icon = (0, _pure.default)(Icon);\n  Icon.muiName = 'SvgIcon';\n  return Icon;\n}\n\n;\nvar _default = createSvgIcon;\nexports.default = _default;\n\n/***/ }),\n\n/***/ 1207:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return queryPatientDocumentQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return saveUploadedImagesUrlQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return createPatientDocumentQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getFileStackPolicySignature; });\nvar queryPatientDocumentQuery=\"\\n    query ($input: QueryParams!) {\\n        queryPatientDocument(input: $input){\\n            id,\\n            healthInsuranceImages\\n        }\\n    }\\n\";var saveUploadedImagesUrlQuery=\"\\n    mutation UpdatePatientDocument($input: UpdatePatientDocumentInput!) {\\n        updatePatientDocument(input: $input) {\\n            healthInsuranceImages \\n        }\\n    }\\n\";var createPatientDocumentQuery=\"\\n    mutation CreatePatientDocument($input: CreatePatientDocumentInput!) {\\n        createPatientDocument(input: $input) {\\n            id\\n        }\\n    }\\n\";var getFileStackPolicySignature=\"\\n    query ($type: String!, $handle: String) {\\n        getFileStackPolicySignature(type: $type, handle: $handle) {\\n            signature,\\n            policy,\\n        }\\n    }\\n\";\n\n/***/ }),\n\n/***/ 986:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NoReduxUploadHealthInsurance\", function() { return UploadHealthInsurance; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_redux__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_filestack_react__ = __webpack_require__(324);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_filestack_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_filestack_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_styled_components__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete__ = __webpack_require__(1205);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__common__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__queries__ = __webpack_require__(1207);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__config_keys__ = __webpack_require__(323);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__config_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__config_keys__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _templateObject=_taggedTemplateLiteral(['\\n    position: absolute;\\n    top: 0;\\n    left: 604px;\\n'],['\\n    position: absolute;\\n    top: 0;\\n    left: 604px;\\n']),_templateObject2=_taggedTemplateLiteral(['\\n    position: relative;\\n'],['\\n    position: relative;\\n']),_templateObject3=_taggedTemplateLiteral(['\\n    width: 600px;\\n    margin: 0 8px 8px 0;\\n    object-fit: contain;\\n'],['\\n    width: 600px;\\n    margin: 0 8px 8px 0;\\n    object-fit: contain;\\n']);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}var StyledDeleteIcon=__WEBPACK_IMPORTED_MODULE_4_styled_components__[\"b\" /* default */].div(_templateObject);var StyledImageContainer=__WEBPACK_IMPORTED_MODULE_4_styled_components__[\"b\" /* default */].div(_templateObject2);var StyledUploadedImage=__WEBPACK_IMPORTED_MODULE_4_styled_components__[\"b\" /* default */].img(_templateObject3);var UploadHealthInsurance=function(_Component){_inherits(UploadHealthInsurance,_Component);function UploadHealthInsurance(props){var _this2=this;_classCallCheck(this,UploadHealthInsurance);var _this=_possibleConstructorReturn(this,(UploadHealthInsurance.__proto__||Object.getPrototypeOf(UploadHealthInsurance)).call(this,props));_this.extractUrlToState=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(result){var uploadImages,signedUrlArr,urlArr,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,value,generatedSignedUrl;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uploadImages=result.filesUploaded;signedUrlArr=[].concat(_toConsumableArray(_this.state.signedUrlArr));urlArr=[].concat(_toConsumableArray(_this.state.urlArr));_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=6;_iterator=uploadImages[Symbol.iterator]();case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=18;break;}value=_step.value;_context.next=12;return _this.generateImageSignature(value.url);case 12:generatedSignedUrl=_context.sent;signedUrlArr.push(generatedSignedUrl);urlArr.push(value.url);case 15:_iteratorNormalCompletion=true;_context.next=8;break;case 18:_context.next=24;break;case 20:_context.prev=20;_context.t0=_context['catch'](6);_didIteratorError=true;_iteratorError=_context.t0;case 24:_context.prev=24;_context.prev=25;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}case 27:_context.prev=27;if(!_didIteratorError){_context.next=30;break;}throw _iteratorError;case 30:return _context.finish(27);case 31:return _context.finish(24);case 32:_this.setState({signedUrlArr:signedUrlArr,urlArr:urlArr});case 33:case'end':return _context.stop();}}},_callee,_this2,[[6,20,24,32],[25,,27,31]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.deleteImage=function(e){var imageindex=e.currentTarget.dataset.imageindex;var tempSignedUrl=[].concat(_toConsumableArray(_this.state.signedUrlArr));var tempUrl=[].concat(_toConsumableArray(_this.state.urlArr));tempSignedUrl.splice(imageindex,1);tempUrl.splice(imageindex,1);_this.setState({signedUrlArr:tempSignedUrl,urlArr:tempUrl});};_this.handleSubmit=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){var auth,patientDocResponse,id,response,params;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:auth=_this.props.auth;// In order to update the patient document table, we need to get the primary key\n// so we get the patient document by patient id and extract the primary key. We will\n// use the primary key to update the patient document.\n_context2.next=3;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"c\" /* queryPatientDocumentQuery */],{'input':{'partitionKey':'patientId','partitionValue':auth&&auth.id}});case 3:patientDocResponse=_context2.sent;id=patientDocResponse&&patientDocResponse.data&&patientDocResponse.data.queryPatientDocument[0]&&patientDocResponse.data.queryPatientDocument[0].id;response=void 0;// There is no patient document for this user yet. Let's go ahead and create it\nif(id){_context2.next=12;break;}_context2.next=9;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"a\" /* createPatientDocumentQuery */],{input:{patientId:auth&&auth.id,healthInsuranceImages:_this.state.signedUrlArr}});case 9:response=_context2.sent;_context2.next=16;break;case 12:params={id:id,healthInsuranceImages:_this.state.signedUrlArr};_context2.next=15;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"d\" /* saveUploadedImagesUrlQuery */],{input:params});case 15:response=_context2.sent;case 16:if(response&&!response.errors){alert('Successfully saved images');}else{alert('Something went wrong. Please try again later');}case 17:case'end':return _context2.stop();}}},_callee2,_this2);}));_this.state={uploadPolicySignature:'',isLoading:true,signedUrlArr:[],urlArr:[]};return _this;}_createClass(UploadHealthInsurance,[{key:'componentDidMount',value:function(){var _ref3=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3(){var patientDocuments,uploadFileStackKeys;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!this.props.auth){_context3.next=8;break;}_context3.next=3;return this.getPatientDocuments(this.props.auth.id);case 3:patientDocuments=_context3.sent;_context3.next=6;return this.getUploadPolicySignature();case 6:uploadFileStackKeys=_context3.sent;this.setState(Object.assign({isLoading:false},patientDocuments,uploadFileStackKeys));case 8:case'end':return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _ref3.apply(this,arguments);}return componentDidMount;}()},{key:'componentDidUpdate',value:function(){var _ref4=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4(){var patientDocuments,uploadFileStackKeys;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.props.auth&&this.state.isLoading)){_context4.next=8;break;}_context4.next=3;return this.getPatientDocuments(this.props.auth.id);case 3:patientDocuments=_context4.sent;_context4.next=6;return this.getUploadPolicySignature();case 6:uploadFileStackKeys=_context4.sent;this.setState(Object.assign({isLoading:false},patientDocuments,uploadFileStackKeys));case 8:case'end':return _context4.stop();}}},_callee4,this);}));function componentDidUpdate(){return _ref4.apply(this,arguments);}return componentDidUpdate;}()},{key:'getUploadPolicySignature',value:function(){var _ref5=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee5(){var uploadPolicySignature,policySignature;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"b\" /* getFileStackPolicySignature */],{type:'upload'});case 2:uploadPolicySignature=_context5.sent;policySignature=uploadPolicySignature&&uploadPolicySignature.data&&uploadPolicySignature.data.getFileStackPolicySignature;return _context5.abrupt('return',{uploadPolicySignature:policySignature});case 5:case'end':return _context5.stop();}}},_callee5,this);}));function getUploadPolicySignature(){return _ref5.apply(this,arguments);}return getUploadPolicySignature;}()},{key:'getViewPolicySignature',value:function(){var _ref6=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee6(handle){var viewPolicySignature;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"b\" /* getFileStackPolicySignature */],{type:'view',handle:handle});case 2:viewPolicySignature=_context6.sent;return _context6.abrupt('return',viewPolicySignature&&viewPolicySignature.data);case 4:case'end':return _context6.stop();}}},_callee6,this);}));function getViewPolicySignature(_x2){return _ref6.apply(this,arguments);}return getViewPolicySignature;}()},{key:'getPatientDocuments',value:function(){var _ref7=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee7(id){var patientDocument,signedUrlArr,urlArr,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,obj,result;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return Object(__WEBPACK_IMPORTED_MODULE_8__util_clientDataLoader__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_7__queries__[\"c\" /* queryPatientDocumentQuery */],{'input':{'partitionKey':'patientId','partitionValue':id}});case 2:patientDocument=_context7.sent;patientDocument=patientDocument&&patientDocument.data&&patientDocument.data.queryPatientDocument[0];signedUrlArr=[];urlArr=[];if(!(patientDocument&&patientDocument.healthInsuranceImages&&patientDocument.healthInsuranceImages.length>0)){_context7.next=37;break;}_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context7.prev=10;_iterator2=patientDocument.healthInsuranceImages[Symbol.iterator]();case 12:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context7.next=22;break;}obj=_step2.value;_context7.next=16;return this.generateImageSignature(obj);case 16:result=_context7.sent;signedUrlArr.push(result);urlArr.push(obj);case 19:_iteratorNormalCompletion2=true;_context7.next=12;break;case 22:_context7.next=28;break;case 24:_context7.prev=24;_context7.t0=_context7['catch'](10);_didIteratorError2=true;_iteratorError2=_context7.t0;case 28:_context7.prev=28;_context7.prev=29;if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}case 31:_context7.prev=31;if(!_didIteratorError2){_context7.next=34;break;}throw _iteratorError2;case 34:return _context7.finish(31);case 35:return _context7.finish(28);case 36:return _context7.abrupt('return',{signedUrlArr:signedUrlArr,urlArr:urlArr});case 37:return _context7.abrupt('return',null);case 38:case'end':return _context7.stop();}}},_callee7,this,[[10,24,28,36],[29,,31,35]]);}));function getPatientDocuments(_x3){return _ref7.apply(this,arguments);}return getPatientDocuments;}()},{key:'generateImageSignature',value:function(){var _ref8=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee8(urlArr){var viewPolicySignature;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.getViewPolicySignature(urlArr.split('/')[3]);case 2:viewPolicySignature=_context8.sent;return _context8.abrupt('return',urlArr+'?policy='+viewPolicySignature.getFileStackPolicySignature.policy+'&signature='+viewPolicySignature.getFileStackPolicySignature.signature);case 4:case'end':return _context8.stop();}}},_callee8,this);}));function generateImageSignature(_x4){return _ref8.apply(this,arguments);}return generateImageSignature;}()},{key:'renderUploadedImages',value:function renderUploadedImages(){var _this3=this;if(this.state.signedUrlArr.length<=0){return'';}return this.state.signedUrlArr.map(function(value,key){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(StyledImageContainer,{key:key},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(StyledUploadedImage,{'data-name':'styledUploadedImage',src:value,key:'img-'+key,alt:'uploadedImage'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(StyledDeleteIcon,{'data-imageindex':key,onClick:_this3.deleteImage},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__material_ui_icons_Delete___default.a,{style:{'fontSize':'40px'}})));});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"f\" /* Container */],null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"a\" /* Box */],{pt:50},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"q\" /* Typography */],{fontSize:5,fontWeight:'regular',color:'black'},'Health insurance card')),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"q\" /* Typography */],{fontSize:3},'Please upload a picture of your health insurance card front and back.')),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"a\" /* Box */],{pt:10},this.renderUploadedImages()),!this.state.isLoading&&__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_filestack_react___default.a,{apikey:__WEBPACK_IMPORTED_MODULE_9__config_keys__[\"secureFilestackKey\"],security:{policy:this.state.uploadPolicySignature.policy,signature:this.state.uploadPolicySignature.signature},options:{accept:['image/*'],imageMin:[300,300],maxFiles:5,fromSources:['local_file_system','url','imagesearch','facebook','instagram'],storeTo:{location:'s3'}},onSuccess:this.extractUrlToState,render:function render(_ref9){var onPick=_ref9.onPick;return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"b\" /* Button */],{onClick:onPick,color:'primary'},'Upload Images');}}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"a\" /* Box */],{pt:10},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"b\" /* Button */],{onClick:this.handleSubmit,color:'secondary',type:'submit'},'Save'))));}}]);return UploadHealthInsurance;}(__WEBPACK_IMPORTED_MODULE_1_react__[\"Component\"]);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};// Exporting it as an object without the connect so we can unit test it properly. If you don't\n// do this then you have to mock the store.\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_2_react_redux__[\"b\" /* connect */])(mapStateToProps,null)(UploadHealthInsurance));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.21cf9def.chunk.js","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"g\", null, _react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n})), 'Delete');\n\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/icons/Delete.js\n// module id = 1205\n// module chunks = 10","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/builtin/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _pure = _interopRequireDefault(require(\"recompose/pure\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"@material-ui/core/SvgIcon\"));\n\nfunction createSvgIcon(path, displayName) {\n  var Icon = function Icon(props) {\n    return _react.default.createElement(_SvgIcon.default, props, path);\n  };\n\n  Icon.displayName = displayName;\n  Icon = (0, _pure.default)(Icon);\n  Icon.muiName = 'SvgIcon';\n  return Icon;\n}\n\n;\nvar _default = createSvgIcon;\nexports.default = _default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/icons/utils/createSvgIcon.js\n// module id = 1206\n// module chunks = 10","export const queryPatientDocumentQuery = `\n    query ($input: QueryParams!) {\n        queryPatientDocument(input: $input){\n            id,\n            healthInsuranceImages\n        }\n    }\n`;\n\nexport const saveUploadedImagesUrlQuery = `\n    mutation UpdatePatientDocument($input: UpdatePatientDocumentInput!) {\n        updatePatientDocument(input: $input) {\n            healthInsuranceImages \n        }\n    }\n`;\n\nexport const createPatientDocumentQuery = `\n    mutation CreatePatientDocument($input: CreatePatientDocumentInput!) {\n        createPatientDocument(input: $input) {\n            id\n        }\n    }\n`;\n\nexport const getFileStackPolicySignature = `\n    query ($type: String!, $handle: String) {\n        getFileStackPolicySignature(type: $type, handle: $handle) {\n            signature,\n            policy,\n        }\n    }\n`;\n\n\n// WEBPACK FOOTER //\n// ./src/components/UploadDocuments/queries.js","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport ReactFilestack from 'filestack-react';\nimport styled from 'styled-components';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { Button, Container, Box, Typography } from '../common';\nimport {\n    queryPatientDocumentQuery,\n    saveUploadedImagesUrlQuery,\n    createPatientDocumentQuery,\n    getFileStackPolicySignature,\n} from './queries';\nimport makeApiCall from '../../util/clientDataLoader';\nimport { secureFilestackKey } from '../../config/keys';\n\nconst StyledDeleteIcon = styled.div`\n    position: absolute;\n    top: 0;\n    left: 604px;\n`;\n\nconst StyledImageContainer = styled.div`\n    position: relative;\n`\nconst StyledUploadedImage = styled.img`\n    width: 600px;\n    margin: 0 8px 8px 0;\n    object-fit: contain;\n`;\n\nclass UploadHealthInsurance extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            uploadPolicySignature: '',\n            isLoading: true,\n            signedUrlArr: [],\n            urlArr: [],\n        };\n    }\n\n    async componentDidMount() {\n        if (this.props.auth) {\n            const patientDocuments = await this.getPatientDocuments(this.props.auth.id);\n            const uploadFileStackKeys = await this.getUploadPolicySignature();\n\n            this.setState({\n                isLoading: false,\n                ...patientDocuments,\n                ...uploadFileStackKeys,\n            })\n        }\n    }\n\n    async componentDidUpdate() {\n        // if auth is loaded and we haven't loaded any patient document\n        if (this.props.auth && this.state.isLoading) {\n            const patientDocuments = await this.getPatientDocuments(this.props.auth.id);\n            const uploadFileStackKeys = await this.getUploadPolicySignature();\n\n            this.setState({\n                isLoading: false,\n                ...patientDocuments,\n                ...uploadFileStackKeys,\n            })\n        }\n    }\n\n    async getUploadPolicySignature() {\n        const uploadPolicySignature = await makeApiCall(getFileStackPolicySignature, {\n            type: 'upload',\n        });\n\n        const policySignature = uploadPolicySignature\n            && uploadPolicySignature.data\n            && uploadPolicySignature.data.getFileStackPolicySignature;\n\n        return {\n            uploadPolicySignature: policySignature,\n        };\n    }\n\n    async getViewPolicySignature(handle) {\n        const viewPolicySignature = await makeApiCall(getFileStackPolicySignature, {\n            type: 'view',\n            handle,\n        });\n\n        return viewPolicySignature && viewPolicySignature.data;\n    }\n\n    async getPatientDocuments(id) {\n        let patientDocument = await makeApiCall(queryPatientDocumentQuery, {\n            'input': {\n                'partitionKey': 'patientId',\n                'partitionValue': id,\n            }\n        });\n\n        patientDocument = patientDocument\n            && patientDocument.data\n            && patientDocument.data.queryPatientDocument[0];\n\n        let signedUrlArr = [];\n        let urlArr = [];\n\n        if (patientDocument && patientDocument.healthInsuranceImages\n            && patientDocument.healthInsuranceImages.length > 0) {\n            for (let obj of patientDocument.healthInsuranceImages) {\n                const result = await this.generateImageSignature(obj);\n                signedUrlArr.push(result);\n                urlArr.push(obj)\n            }\n\n            return {\n                signedUrlArr,\n                urlArr\n            };\n        }\n\n        return null;\n    }\n\n    async generateImageSignature(urlArr) {\n\n        // Extracting the file handle from the urlArr. The urlArr has this format https://cdn.filestackcontent.com/yF9AgWbSTHyWbMGZDiow\n        const viewPolicySignature = await this.getViewPolicySignature(urlArr.split('/')[3]);\n\n        return `${urlArr}?policy=${viewPolicySignature.getFileStackPolicySignature.policy}&signature=${viewPolicySignature.getFileStackPolicySignature.signature}`;\n    }\n\n    extractUrlToState = async (result) => {\n\n        let uploadImages = result.filesUploaded;\n        let signedUrlArr = [...this.state.signedUrlArr];\n        let urlArr = [...this.state.urlArr];\n\n        for (let value of uploadImages) {\n            const generatedSignedUrl = await this.generateImageSignature(value.url);\n            signedUrlArr.push(generatedSignedUrl);\n            urlArr.push(value.url);\n        }\n\n        this.setState({\n            signedUrlArr,\n            urlArr\n        });\n    }\n\n    renderUploadedImages() {\n        if (this.state.signedUrlArr.length <= 0) {\n            return '';\n        }\n\n        return this.state.signedUrlArr.map((value, key) => {\n            return (\n                <StyledImageContainer key={key}>\n                    <StyledUploadedImage\n                        data-name=\"styledUploadedImage\"\n                        src={value}\n                        key={`img-${key}`}\n                        alt=\"uploadedImage\"\n                    />\n                    <StyledDeleteIcon data-imageindex={key} onClick={this.deleteImage}>\n                        <DeleteIcon style={{'fontSize': '40px'}}/>\n                    </StyledDeleteIcon>\n                </StyledImageContainer>\n            )\n        });\n    }\n\n    deleteImage = (e) => {\n        const { imageindex } = e.currentTarget.dataset;\n        const tempSignedUrl = [...this.state.signedUrlArr];\n        const tempUrl = [...this.state.urlArr];\n\n        tempSignedUrl.splice(imageindex, 1);\n        tempUrl.splice(imageindex, 1);\n\n        this.setState({\n            signedUrlArr: tempSignedUrl,\n            urlArr: tempUrl,\n        });\n    }\n\n    handleSubmit = async () => {\n\n        const { auth } = this.props;\n        // In order to update the patient document table, we need to get the primary key\n        // so we get the patient document by patient id and extract the primary key. We will\n        // use the primary key to update the patient document.\n        const patientDocResponse = await makeApiCall(queryPatientDocumentQuery, {\n            'input': {\n                'partitionKey': 'patientId',\n                'partitionValue': auth && auth.id,\n            }\n        });\n\n        const id = patientDocResponse\n            && patientDocResponse.data\n            && patientDocResponse.data.queryPatientDocument[0]\n            && patientDocResponse.data.queryPatientDocument[0].id;\n\n        let response;\n        // There is no patient document for this user yet. Let's go ahead and create it\n        if (!id) {\n            response = await makeApiCall(createPatientDocumentQuery, {\n                input: {\n                    patientId: auth && auth.id,\n                    healthInsuranceImages: this.state.signedUrlArr,\n                }\n            });\n\n        } else {\n            const params = {\n                id,\n                healthInsuranceImages: this.state.signedUrlArr,\n            };\n\n            response = await makeApiCall(saveUploadedImagesUrlQuery, {\n                input: params\n            });\n        }\n\n        if (response && !response.errors) {\n            alert('Successfully saved images');\n        } else {\n            alert('Something went wrong. Please try again later');\n        }\n\n    }\n\n    render () {\n        return (\n            <Container>\n                <Box pt={50}>\n                    <div>\n                        <Typography fontSize={5} fontWeight=\"regular\" color=\"black\">\n                            Health insurance card\n                        </Typography>\n                    </div>\n                    <div>\n                        <Typography fontSize={3} >\n                            Please upload a picture of your health insurance card front and back.\n                        </Typography>\n                    </div>\n                    <Box pt={10}>\n                        {this.renderUploadedImages()}\n                    </Box>\n\n                    {!this.state.isLoading &&\n                        <ReactFilestack\n                            apikey={secureFilestackKey}\n                            security={{\n                                policy: this.state.uploadPolicySignature.policy,\n                                signature: this.state.uploadPolicySignature.signature,\n                            }}\n                            options={{\n                                accept: ['image/*'],\n                                imageMin: [300, 300],\n                                maxFiles: 5,\n                                fromSources: [\n                                    'local_file_system',\n                                    'url',\n                                    'imagesearch',\n                                    'facebook',\n                                    'instagram'\n                                ],\n                                storeTo: {\n                                    location: 's3',\n                                }\n                            }}\n                            onSuccess={this.extractUrlToState}\n                            render={({ onPick }) => (\n                                <Button\n                                    onClick={onPick}\n                                    color=\"primary\"\n                                >\n                                    Upload Images\n                                </Button>\n                            )}\n                        />\n                    }\n\n                    <Box pt={10}>\n                        <Button\n                            onClick={this.handleSubmit}\n                            color=\"secondary\"\n                            type=\"submit\"\n                        >\n                            Save\n                        </Button>\n                    </Box>\n                </Box>\n            </Container>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.auth,\n    };\n}\n\n// Exporting it as an object without the connect so we can unit test it properly. If you don't\n// do this then you have to mock the store.\nexport { UploadHealthInsurance as NoReduxUploadHealthInsurance };\nexport default connect(mapStateToProps, null)(UploadHealthInsurance);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/UploadDocuments/UploadHealthInsurance.js"],"sourceRoot":""}