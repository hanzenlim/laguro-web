webpackJsonp([12],{1197:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function o(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var c=t(1),m=t.n(c),d=t(26),s=t.n(d),u=t(185),p=(t.n(u),t(15)),l=t(122),f=t(20),y=t(332),h=t.n(y),b=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),v=o(["\n    display: flex;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        flex-direction: row;\n    }\n"],["\n    display: flex;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        flex-direction: row;\n    }\n"]),x=o(["\n    width: 100%;\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        max-width: 150px;\n        max-height: 100px;\n        margin-bottom: 0;\n        padding-right: 20px;\n    }\n"],["\n    width: 100%;\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        max-width: 150px;\n        max-height: 100px;\n        margin-bottom: 0;\n        padding-right: 20px;\n    }\n"]),g=o(["\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        justify-content: space-between;\n        flex-direction: row;\n    }\n"],["\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        justify-content: space-between;\n        flex-direction: row;\n    }\n"]),w=o(["\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        margin-bottom: 0;\n    }\n"],["\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        margin-bottom: 0;\n    }\n"]),E=o(["\n    align-items: flex-start;\n\n    @media screen and (min-width: 600px) {\n        align-items: flex-end;\n    }\n"],["\n    align-items: flex-start;\n\n    @media screen and (min-width: 600px) {\n        align-items: flex-end;\n    }\n"]),P=Object(p.b)(f.a)(v),j=p.b.div(x),O=p.b.div(g),T=Object(p.b)(f.h)(w),C=Object(p.b)(f.h)(E),_=function(e){function n(){var e,t,i,o;a(this,n);for(var c=arguments.length,d=Array(c),s=0;s<c;s++)d[s]=arguments[s];return t=i=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(d))),i.renderProcedureNames=function(){var e=i.props.payment.procedureNames;return e&&e.map(function(e,n){return m.a.createElement("li",{key:n},e)})},o=t,r(i,o)}return i(n,e),b(n,[{key:"render",value:function(){var e=this.props,n=e.index,t=e.payment,a=t.action,r=t.date,i=t.description,o=t.endTime,c=t.office,d=t.paymentAmount,p=t.startTime,y=t.source;return Object(u.isEmpty)(t)?"":m.a.createElement(f.a,{mb:2},m.a.createElement(f.c,{key:n},m.a.createElement(P,{p:3},c.imageUrls&&m.a.createElement(j,null,m.a.createElement("img",{width:"100%",height:"100%","data-name":"office-image",src:Object(u.isEmpty)(c.imageUrls)?h.a:c.imageUrls[0],alt:Object(u.isEmpty)(c.imageUrls)?h.a:c.imageUrls[0]})),m.a.createElement(O,null,m.a.createElement(T,{flexDirection:"column"},m.a.createElement("div",{"data-name":"office-name"},m.a.createElement(f.q,{fontSize:4,fontWeight:"bold"},c.name)),m.a.createElement("div",{"data-name":"office-location"},m.a.createElement(f.q,{fontSize:2},c.location)),m.a.createElement("div",null,m.a.createElement("div",{"data-name":"action"},a),m.a.createElement("div",{"data-name":"start-end-time"},s()(p).format("MMM DD h:mm a ")+(o&&s()(o).format("- h:mm a"))),m.a.createElement("div",{"data-name":"procedures"},this.renderProcedureNames()))),m.a.createElement(C,{flexDirection:"column"},m.a.createElement(f.h,{justifyContent:"center"},m.a.createElement("div",{"data-name":"payment-amount"},Object(l.c)(d))),m.a.createElement(f.h,{justifyContent:"center"},m.a.createElement("div",{"data-name":"description"},m.a.createElement(f.a,{fontSize:2,description:i},i))),m.a.createElement(f.h,{justifyContent:"center"},m.a.createElement("div",{"data-name":"date"},m.a.createElement(f.q,{fontSize:1},r&&s.a.unix(r).format("MMMM Do, YYYY h:mm A")))),m.a.createElement(f.h,{justifyContent:"center"},m.a.createElement("div",{"data-name":"source"},m.a.createElement(f.q,null,y.brand+" - "+y.last4))))))))}}]),n}(c.Component);n.a=_},979:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function o(e){return{auth:e.auth,isFetchingPaymentHistory:e.payments.isFetchingPayerPayments,payerPayments:e.payments.payerPayments}}Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"PaymentHistory",function(){return x});var c=t(1),m=t.n(c),d=t(185),s=(t.n(d),t(15)),u=t(19),p=t(23),l=t(24),f=t(20),y=t(1197),h=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),b=function(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}(["\n    margin: 0 auto;\n    max-width: 768px;\n    width: 100%;\n    padding: 0 10px;\n"],["\n    margin: 0 auto;\n    max-width: 768px;\n    width: 100%;\n    padding: 0 10px;\n"]),v=s.b.div(b),x=function(e){function n(){var e,t,i,o;a(this,n);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return t=i=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),i.processPayment=function(e,n){var t=n.stripePayment,a=t.source,r=t.created,i=n.reservation,o=n.appointment,c=n.procedures,m=void 0,d=void 0,s=void 0,u=void 0,p=void 0,f=void 0,y=void 0,h={},b=Number(r),v=n.nominalAmount;return n.type===l.L&&i?(m=l.J,d=i.office,u=i,f=u.startTime,y=u.endTime):n.type===l.g&&o?(m=l.e,d=o.reservation.office,s=[o.procedure.name],u=o,f=u.startTime,y=u.endTime):n.type===l.F&&c&&(m=l.E,d={},u={},f=c[0].dateCreated,y="",s=c.map(function(e){return e.name})),n.status!==l.l&&n.status!==l.G||(p=l.z,h={action:m,auth:e,date:b,description:p,endTime:y,office:d,paymentAmount:v,procedureNames:s,payeeId:n.payee.id,payerId:n.payer.id,startTime:f,source:a,type:n.type}),h},i.processCancellation=function(e,n){var t=n.stripePayment,a=t.source,r=t.refunds,i=n.reservation,o=n.appointment,c=n.refundAmount,m=n.procedures,d=void 0,s=void 0,u=void 0,p=void 0,f=void 0;n.type===l.L&&i?(d=i.office,u=i,p=u.startTime,f=u.endTime):n.type===l.g&&o?(d=o.reservation.office,s=o.procedure.name,u=o,p=u.startTime,f=u.endTime):n.type===l.F&&m&&(d={},u={},p=m[0].dateCreated,f="",s=m.map(function(e){return e.name}));var y={};return u.status===l.i&&(y={action:n.type===l.L?l.K:l.f,auth:e,endTime:f,office:d,procedureNames:s,payeeId:n.payee.id,payerId:n.payer.id,startTime:p,source:a,type:n.type,date:r.data[0].created,description:l.i,paymentAmount:-1*c}),y},i.processPayments=function(e){var n=i.props.auth,t=function(e,n){return e.concat(n)},a=e.filter(function(e){return n.id===e.payer.id}).map(function(e){return i.processPayment(n,e)}).reduce(t,[]);return a=a.concat(e.filter(function(e){return n.id===e.payer.id}).map(function(e){return i.processCancellation(n,e)}).reduce(t,[]))},i.renderPaymentDetailsList=function(e){return Object(d.orderBy)(e,["date"],["desc"]).map(function(e,n){return m.a.createElement(y.a,{payment:e,key:n})})},o=t,r(i,o)}return i(n,e),h(n,[{key:"componentDidMount",value:function(){var e=this.props.auth&&this.props.auth.id;this.props.loadPaymentHistory("\n    query QueryPayments($input: QueryParams!) {\n        queryPayments(input: $input) {\n            id\n            payer {\n                id\n            }\n            payee {\n                id\n            }\n            type\n            status\n            reservation {\n                numChairsSelected\n                startTime\n                endTime\n                office {\n                    id\n                    location\n                    name\n                    imageUrls\n                }\n                status\n                dateCancelled\n            }\n            appointment {\n                procedure {\n                    name\n                }\n                startTime\n                endTime\n                reservation{\n                    office {\n                        id\n                        location\n                        name\n                        imageUrls\n                    }\n                }\n                status\n                dateCancelled\n            }\n            procedures {\n                name\n                dateCreated\n            }\n            nominalAmount\n            currency\n            stripePayment {\n                created\n                amount\n                source {\n                    brand\n                    last4\n                }\n                refunds {\n                    data {\n                        created\n                    }\n                }\n            }\n            chargeStatus\n            dateCreated\n            refundAmount\n\n        }\n    }\n",l.y,e)}},{key:"render",value:function(){var e=this.props,n=e.isFetchingPaymentHistory,t=e.payerPayments,a=this.processPayments(t),r=this.renderPaymentDetailsList(a);return m.a.createElement(v,null,m.a.createElement(f.a,{mt:5},m.a.createElement(f.h,{justifyContent:"space-between"},m.a.createElement(f.q,{fontSize:5},"Payment History")),m.a.createElement(f.a,{pb:3}),Object(d.isEmpty)(r)?n?"Loading...":"No payment history.":r))}}]),n}(c.Component);n.default=Object(u.b)(o,{loadPaymentHistory:p.loadPaymentHistory})(x)}});
//# sourceMappingURL=12.9900cd17.chunk.js.map