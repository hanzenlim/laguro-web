{"version":3,"sources":["../static/js/12.9900cd17.chunk.js","components/PaymentDetails.js","components/PaymentHistory.js"],"names":["webpackJsonp","1197","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_taggedTemplateLiteral","strings","raw","freeze","defineProperties","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_moment__","__WEBPACK_IMPORTED_MODULE_1_moment___default","__WEBPACK_IMPORTED_MODULE_2_lodash__","__WEBPACK_IMPORTED_MODULE_3_styled_components__","__WEBPACK_IMPORTED_MODULE_4__util_paymentUtil__","__WEBPACK_IMPORTED_MODULE_5__common__","__WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png__","__WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png___default","_createClass","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","StyledContainer","StyledImageContainer","div","StyledPaymentInfo","StyledInfoFlex","StyledPaymentFlex","PaymentDetails","_Component","_ref","_temp","_this","_ret","this","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","renderProcedureNames","procedureNames","payment","map","name","index","a","createElement","_props","action","date","description","endTime","office","paymentAmount","startTime","source","mb","p","imageUrls","width","height","data-name","src","alt","flexDirection","fontSize","fontWeight","location","format","justifyContent","unix","brand","last4","979","mapStateToProps","state","auth","isFetchingPaymentHistory","payments","isFetchingPayerPayments","payerPayments","d","PaymentHistory","__WEBPACK_IMPORTED_MODULE_1_lodash__","__WEBPACK_IMPORTED_MODULE_2_styled_components__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","__WEBPACK_IMPORTED_MODULE_4__actions__","__WEBPACK_IMPORTED_MODULE_5__util_strings__","__WEBPACK_IMPORTED_MODULE_6__common__","__WEBPACK_IMPORTED_MODULE_7__PaymentDetails__","processPayment","_payment$stripePaymen","stripePayment","created","reservation","appointment","procedures","eventType","paymentObj","Number","nominalAmount","type","procedure","dateCreated","pc","status","payeeId","payee","id","payerId","payer","processCancellation","_payment$stripePaymen2","refunds","refundAmount","cancellationObj","data","processPayments","x","y","processedPayments","filter","reduce","renderPaymentDetailsList","userId","loadPaymentHistory","paymentHistoryQuery","paymentDetailsList","mt","pb"],"mappings":"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","file":"static/js/12.9900cd17.chunk.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 1197:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_styled_components__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util_paymentUtil__ = __webpack_require__(122);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__common__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png__ = __webpack_require__(332);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _templateObject=_taggedTemplateLiteral(['\\n    display: flex;\\n    flex-direction: column;\\n\\n    @media screen and (min-width: 600px) {\\n        flex-direction: row;\\n    }\\n'],['\\n    display: flex;\\n    flex-direction: column;\\n\\n    @media screen and (min-width: 600px) {\\n        flex-direction: row;\\n    }\\n']),_templateObject2=_taggedTemplateLiteral(['\\n    width: 100%;\\n    margin-bottom: 15px;\\n\\n    @media screen and (min-width: 600px) {\\n        max-width: 150px;\\n        max-height: 100px;\\n        margin-bottom: 0;\\n        padding-right: 20px;\\n    }\\n'],['\\n    width: 100%;\\n    margin-bottom: 15px;\\n\\n    @media screen and (min-width: 600px) {\\n        max-width: 150px;\\n        max-height: 100px;\\n        margin-bottom: 0;\\n        padding-right: 20px;\\n    }\\n']),_templateObject3=_taggedTemplateLiteral(['\\n    display: flex;\\n    flex: 1;\\n    flex-direction: column;\\n\\n    @media screen and (min-width: 600px) {\\n        justify-content: space-between;\\n        flex-direction: row;\\n    }\\n'],['\\n    display: flex;\\n    flex: 1;\\n    flex-direction: column;\\n\\n    @media screen and (min-width: 600px) {\\n        justify-content: space-between;\\n        flex-direction: row;\\n    }\\n']),_templateObject4=_taggedTemplateLiteral(['\\n    margin-bottom: 15px;\\n\\n    @media screen and (min-width: 600px) {\\n        margin-bottom: 0;\\n    }\\n'],['\\n    margin-bottom: 15px;\\n\\n    @media screen and (min-width: 600px) {\\n        margin-bottom: 0;\\n    }\\n']),_templateObject5=_taggedTemplateLiteral(['\\n    align-items: flex-start;\\n\\n    @media screen and (min-width: 600px) {\\n        align-items: flex-end;\\n    }\\n'],['\\n    align-items: flex-start;\\n\\n    @media screen and (min-width: 600px) {\\n        align-items: flex-end;\\n    }\\n']);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}var StyledContainer=Object(__WEBPACK_IMPORTED_MODULE_3_styled_components__[\"b\" /* default */])(__WEBPACK_IMPORTED_MODULE_5__common__[\"a\" /* Box */])(_templateObject);var StyledImageContainer=__WEBPACK_IMPORTED_MODULE_3_styled_components__[\"b\" /* default */].div(_templateObject2);var StyledPaymentInfo=__WEBPACK_IMPORTED_MODULE_3_styled_components__[\"b\" /* default */].div(_templateObject3);var StyledInfoFlex=Object(__WEBPACK_IMPORTED_MODULE_3_styled_components__[\"b\" /* default */])(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */])(_templateObject4);var StyledPaymentFlex=Object(__WEBPACK_IMPORTED_MODULE_3_styled_components__[\"b\" /* default */])(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */])(_templateObject5);var PaymentDetails=function(_Component){_inherits(PaymentDetails,_Component);function PaymentDetails(){var _ref;var _temp,_this,_ret;_classCallCheck(this,PaymentDetails);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=PaymentDetails.__proto__||Object.getPrototypeOf(PaymentDetails)).call.apply(_ref,[this].concat(args))),_this),_this.renderProcedureNames=function(){var procedureNames=_this.props.payment.procedureNames;return procedureNames&&procedureNames.map(function(name,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('li',{key:index},name);});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(PaymentDetails,[{key:'render',value:function render(){var _props=this.props,index=_props.index,payment=_props.payment;var action=payment.action,date=payment.date,description=payment.description,endTime=payment.endTime,office=payment.office,paymentAmount=payment.paymentAmount,startTime=payment.startTime,source=payment.source;if(Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"isEmpty\"])(payment)){return'';}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"a\" /* Box */],{mb:2},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"c\" /* Card */],{key:index},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledContainer,{p:3},office.imageUrls&&__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledImageContainer,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{width:'100%',height:'100%','data-name':'office-image',src:!Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"isEmpty\"])(office.imageUrls)?office.imageUrls[0]:__WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png___default.a,alt:!Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"isEmpty\"])(office.imageUrls)?office.imageUrls[0]:__WEBPACK_IMPORTED_MODULE_6__images_office_placeholder_thumbnail_png___default.a})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledPaymentInfo,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledInfoFlex,{flexDirection:'column'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'office-name'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"q\" /* Typography */],{fontSize:4,fontWeight:'bold'},office.name)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'office-location'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"q\" /* Typography */],{fontSize:2},office.location)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'action'},action),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'start-end-time'},__WEBPACK_IMPORTED_MODULE_1_moment___default()(startTime).format('MMM DD h:mm a ')+(endTime&&__WEBPACK_IMPORTED_MODULE_1_moment___default()(endTime).format('- h:mm a'))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'procedures'},this.renderProcedureNames()))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledPaymentFlex,{flexDirection:'column'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */],{justifyContent:'center'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'payment-amount'},Object(__WEBPACK_IMPORTED_MODULE_4__util_paymentUtil__[\"c\" /* renderPrice */])(paymentAmount))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */],{justifyContent:'center'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'description'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"a\" /* Box */],{fontSize:2,description:description},description))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */],{justifyContent:'center'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'date'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"q\" /* Typography */],{fontSize:1},date&&__WEBPACK_IMPORTED_MODULE_1_moment___default.a.unix(date).format('MMMM Do, YYYY h:mm A')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"h\" /* Flex */],{justifyContent:'center'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{'data-name':'source'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__common__[\"q\" /* Typography */],null,source.brand+' - '+source.last4))))))));}}]);return PaymentDetails;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"a\"] = (PaymentDetails);\n\n/***/ }),\n\n/***/ 979:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PaymentHistory\", function() { return PaymentHistory; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_styled_components__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__actions__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util_strings__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__common__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__PaymentDetails__ = __webpack_require__(1197);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _templateObject=_taggedTemplateLiteral(['\\n    margin: 0 auto;\\n    max-width: 768px;\\n    width: 100%;\\n    padding: 0 10px;\\n'],['\\n    margin: 0 auto;\\n    max-width: 768px;\\n    width: 100%;\\n    padding: 0 10px;\\n']);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}var StyledContainer=__WEBPACK_IMPORTED_MODULE_2_styled_components__[\"b\" /* default */].div(_templateObject);var paymentHistoryQuery='\\n    query QueryPayments($input: QueryParams!) {\\n        queryPayments(input: $input) {\\n            id\\n            payer {\\n                id\\n            }\\n            payee {\\n                id\\n            }\\n            type\\n            status\\n            reservation {\\n                numChairsSelected\\n                startTime\\n                endTime\\n                office {\\n                    id\\n                    location\\n                    name\\n                    imageUrls\\n                }\\n                status\\n                dateCancelled\\n            }\\n            appointment {\\n                procedure {\\n                    name\\n                }\\n                startTime\\n                endTime\\n                reservation{\\n                    office {\\n                        id\\n                        location\\n                        name\\n                        imageUrls\\n                    }\\n                }\\n                status\\n                dateCancelled\\n            }\\n            procedures {\\n                name\\n                dateCreated\\n            }\\n            nominalAmount\\n            currency\\n            stripePayment {\\n                created\\n                amount\\n                source {\\n                    brand\\n                    last4\\n                }\\n                refunds {\\n                    data {\\n                        created\\n                    }\\n                }\\n            }\\n            chargeStatus\\n            dateCreated\\n            refundAmount\\n\\n        }\\n    }\\n';var PaymentHistory=function(_Component){_inherits(PaymentHistory,_Component);function PaymentHistory(){var _ref;var _temp,_this,_ret;_classCallCheck(this,PaymentHistory);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=PaymentHistory.__proto__||Object.getPrototypeOf(PaymentHistory)).call.apply(_ref,[this].concat(args))),_this),_this.processPayment=function(auth,payment){var _payment$stripePaymen=payment.stripePayment,source=_payment$stripePaymen.source,created=_payment$stripePaymen.created;var reservation=payment.reservation,appointment=payment.appointment,procedures=payment.procedures;var action=void 0,office=void 0,procedureNames=void 0,eventType=void 0,description=void 0,startTime=void 0,endTime=void 0;var paymentObj={};var date=Number(created);var paymentAmount=payment.nominalAmount;if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"L\" /* RESERVATION_PAYMENT_TYPE */]&&reservation){action=__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"J\" /* RESERVATION_BOOKED */];office=reservation.office;eventType=reservation;startTime=eventType.startTime;endTime=eventType.endTime;}else if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"g\" /* APPOINTMENT_PAYMENT_TYPE */]&&appointment){action=__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"e\" /* APPOINTMENT_BOOKED */];office=appointment.reservation.office;procedureNames=[appointment.procedure.name];eventType=appointment;startTime=eventType.startTime;endTime=eventType.endTime;}else if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"F\" /* PROCEDURE_PAYMENT_TYPE */]&&procedures){action=__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"E\" /* PROCEDURES_ASSIGNED */];office={};eventType={};startTime=procedures[0].dateCreated;endTime='';procedureNames=procedures.map(function(pc){return pc.name;});}// Upon refund, payment.status changes to REFUNDED. It is still necessary to process such payment with description PAYMENT_MADE.\nif(payment.status===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"l\" /* CHARGED */]||payment.status===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"G\" /* REFUNDED */]){description=__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"z\" /* PAYMENT_MADE */];paymentObj={action:action,auth:auth,date:date,description:description,endTime:endTime,office:office,paymentAmount:paymentAmount,procedureNames:procedureNames,payeeId:payment.payee.id,payerId:payment.payer.id,startTime:startTime,source:source,type:payment.type};}return paymentObj;},_this.processCancellation=function(auth,payment){var _payment$stripePaymen2=payment.stripePayment,source=_payment$stripePaymen2.source,refunds=_payment$stripePaymen2.refunds;var reservation=payment.reservation,appointment=payment.appointment,refundAmount=payment.refundAmount,procedures=payment.procedures;var office=void 0;var procedureNames=void 0;var eventType=void 0;var startTime=void 0;var endTime=void 0;if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"L\" /* RESERVATION_PAYMENT_TYPE */]&&reservation){office=reservation.office;eventType=reservation;startTime=eventType.startTime;endTime=eventType.endTime;}else if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"g\" /* APPOINTMENT_PAYMENT_TYPE */]&&appointment){office=appointment.reservation.office;procedureNames=appointment.procedure.name;eventType=appointment;startTime=eventType.startTime;endTime=eventType.endTime;}else if(payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"F\" /* PROCEDURE_PAYMENT_TYPE */]&&procedures){office={};eventType={};startTime=procedures[0].dateCreated;endTime='';procedureNames=procedures.map(function(pc){return pc.name;});}var cancellationObj={};if(eventType.status===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"i\" /* CANCELLED */]){cancellationObj={action:payment.type===__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"L\" /* RESERVATION_PAYMENT_TYPE */]?__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"K\" /* RESERVATION_CANCELLED_BY_DENTIST */]:__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"f\" /* APPOINTMENT_CANCELLED_BY_PATIENT */],auth:auth,endTime:endTime,office:office,procedureNames:procedureNames,payeeId:payment.payee.id,payerId:payment.payer.id,startTime:startTime,source:source,type:payment.type,date:refunds.data[0].created,description:__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"i\" /* CANCELLED */],paymentAmount:-1*refundAmount};}return cancellationObj;},_this.processPayments=function(payerPayments){var auth=_this.props.auth;var concat=function concat(x,y){return x.concat(y);};var processedPayments=payerPayments.filter(function(payment){return auth.id===payment.payer.id;}).map(function(payment){return _this.processPayment(auth,payment);}).reduce(concat,[]);processedPayments=processedPayments.concat(payerPayments.filter(function(payment){return auth.id===payment.payer.id;}).map(function(payment){return _this.processCancellation(auth,payment);}).reduce(concat,[]));return processedPayments;},_this.renderPaymentDetailsList=function(processedPayments){var orderedProcessedPayments=Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"orderBy\"])(processedPayments,['date'],['desc']);return orderedProcessedPayments.map(function(payment,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__PaymentDetails__[\"a\" /* default */],{payment:payment,key:index});});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(PaymentHistory,[{key:'componentDidMount',value:function componentDidMount(){var userId=this.props.auth&&this.props.auth.id;this.props.loadPaymentHistory(paymentHistoryQuery,__WEBPACK_IMPORTED_MODULE_5__util_strings__[\"y\" /* PAYER_ID */],userId);}},{key:'render',value:function render(){var _props=this.props,isFetchingPaymentHistory=_props.isFetchingPaymentHistory,payerPayments=_props.payerPayments;var processedPayments=this.processPayments(payerPayments);var paymentDetailsList=this.renderPaymentDetailsList(processedPayments);return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(StyledContainer,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"a\" /* Box */],{mt:5},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"h\" /* Flex */],{justifyContent:'space-between'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"q\" /* Typography */],{fontSize:5},'Payment History')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__common__[\"a\" /* Box */],{pb:3}),!Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"isEmpty\"])(paymentDetailsList)?paymentDetailsList:isFetchingPaymentHistory?'Loading...':'No payment history.'));}}]);return PaymentHistory;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);function mapStateToProps(state){return{auth:state.auth,isFetchingPaymentHistory:state.payments.isFetchingPayerPayments,payerPayments:state.payments.payerPayments};}/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_3_react_redux__[\"b\" /* connect */])(mapStateToProps,{loadPaymentHistory:__WEBPACK_IMPORTED_MODULE_4__actions__[\"loadPaymentHistory\"]})(PaymentHistory));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/12.9900cd17.chunk.js","import React, { Component } from 'react';\nimport moment from 'moment';\nimport { isEmpty } from 'lodash';\nimport styled from 'styled-components';\nimport { renderPrice } from '../util/paymentUtil';\nimport { Box, Card, Flex, Typography } from './common';\nimport officeImgPlaceholder from './images/office-placeholder-thumbnail.png';\n\nconst StyledContainer = styled(Box)`\n    display: flex;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        flex-direction: row;\n    }\n`;\n\nconst StyledImageContainer = styled.div`\n    width: 100%;\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        max-width: 150px;\n        max-height: 100px;\n        margin-bottom: 0;\n        padding-right: 20px;\n    }\n`;\n\nconst StyledPaymentInfo = styled.div`\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n\n    @media screen and (min-width: 600px) {\n        justify-content: space-between;\n        flex-direction: row;\n    }\n`;\n\nconst StyledInfoFlex = styled(Flex)`\n    margin-bottom: 15px;\n\n    @media screen and (min-width: 600px) {\n        margin-bottom: 0;\n    }\n`;\n\nconst StyledPaymentFlex = styled(Flex)`\n    align-items: flex-start;\n\n    @media screen and (min-width: 600px) {\n        align-items: flex-end;\n    }\n`;\n\nclass PaymentDetails extends Component {\n    renderProcedureNames = () => {\n        const { procedureNames } = this.props.payment;\n\n        return (\n            procedureNames &&\n            procedureNames.map((name, index) => <li key={index}>{name}</li>)\n        );\n    };\n\n    render() {\n        const { index, payment } = this.props;\n        const {\n            action,\n            date,\n            description,\n            endTime,\n            office,\n            paymentAmount,\n            startTime,\n            source\n        } = payment;\n\n        if (isEmpty(payment)) {\n            return '';\n        }\n\n        return (\n            <Box mb={2}>\n                <Card key={index}>\n                    <StyledContainer p={3}>\n                        {office.imageUrls && (\n                            <StyledImageContainer>\n                                <img\n                                    width=\"100%\"\n                                    height=\"100%\"\n                                    data-name=\"office-image\"\n                                    src={\n                                        !isEmpty(office.imageUrls)\n                                            ? office.imageUrls[0]\n                                            : officeImgPlaceholder\n                                    }\n                                    alt={\n                                        !isEmpty(office.imageUrls)\n                                            ? office.imageUrls[0]\n                                            : officeImgPlaceholder\n                                    }\n                                />\n                            </StyledImageContainer>\n                        )}\n\n                        <StyledPaymentInfo>\n                            <StyledInfoFlex flexDirection=\"column\">\n                                <div data-name=\"office-name\">\n                                    <Typography fontSize={4} fontWeight=\"bold\">\n                                        {office.name}\n                                    </Typography>\n                                </div>\n                                <div data-name=\"office-location\">\n                                    <Typography fontSize={2}>\n                                        {office.location}\n                                    </Typography>\n                                </div>\n                                <div>\n                                    <div data-name=\"action\">{action}</div>\n                                    <div data-name=\"start-end-time\">\n                                        {moment(startTime).format(\n                                            'MMM DD h:mm a '\n                                        ) +\n                                            (endTime &&\n                                                moment(endTime).format(\n                                                    '- h:mm a'\n                                                ))}\n                                    </div>\n                                    <div data-name=\"procedures\">\n                                        {this.renderProcedureNames()}\n                                    </div>\n                                </div>\n                            </StyledInfoFlex>\n                            <StyledPaymentFlex flexDirection=\"column\">\n                                <Flex justifyContent=\"center\">\n                                    <div data-name=\"payment-amount\">\n                                        {renderPrice(paymentAmount)}\n                                    </div>\n                                </Flex>\n                                <Flex justifyContent=\"center\">\n                                    <div data-name=\"description\">\n                                        <Box\n                                            fontSize={2}\n                                            description={description}\n                                        >\n                                            {description}\n                                        </Box>\n                                    </div>\n                                </Flex>\n                                <Flex justifyContent=\"center\">\n                                    <div data-name=\"date\">\n                                        <Typography fontSize={1}>\n                                            {date &&\n                                                moment\n                                                    .unix(date)\n                                                    .format(\n                                                        'MMMM Do, YYYY h:mm A'\n                                                    )}\n                                        </Typography>\n                                    </div>\n                                </Flex>\n                                <Flex justifyContent=\"center\">\n                                    <div data-name=\"source\">\n                                        <Typography>{`${source.brand} - ${\n                                            source.last4\n                                        }`}</Typography>\n                                    </div>\n                                </Flex>\n                            </StyledPaymentFlex>\n                        </StyledPaymentInfo>\n                    </StyledContainer>\n                </Card>\n            </Box>\n        );\n    }\n}\n\nexport default PaymentDetails;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PaymentDetails.js","import React, { Component } from 'react';\nimport { isEmpty, orderBy } from 'lodash';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { loadPaymentHistory } from '../actions';\nimport {\n    APPOINTMENT_BOOKED,\n    APPOINTMENT_CANCELLED_BY_PATIENT,\n    APPOINTMENT_PAYMENT_TYPE,\n    CANCELLED,\n    CHARGED,\n    PAYER_ID,\n    PAYMENT_MADE,\n    REFUNDED,\n    RESERVATION_BOOKED,\n    RESERVATION_CANCELLED_BY_DENTIST,\n    RESERVATION_PAYMENT_TYPE,\n    PROCEDURE_PAYMENT_TYPE,\n    PROCEDURES_ASSIGNED\n} from '../util/strings';\nimport { Box, Flex, Typography } from './common';\nimport PaymentDetails from './PaymentDetails';\n\nconst StyledContainer = styled.div`\n    margin: 0 auto;\n    max-width: 768px;\n    width: 100%;\n    padding: 0 10px;\n`;\n\nconst paymentHistoryQuery = `\n    query QueryPayments($input: QueryParams!) {\n        queryPayments(input: $input) {\n            id\n            payer {\n                id\n            }\n            payee {\n                id\n            }\n            type\n            status\n            reservation {\n                numChairsSelected\n                startTime\n                endTime\n                office {\n                    id\n                    location\n                    name\n                    imageUrls\n                }\n                status\n                dateCancelled\n            }\n            appointment {\n                procedure {\n                    name\n                }\n                startTime\n                endTime\n                reservation{\n                    office {\n                        id\n                        location\n                        name\n                        imageUrls\n                    }\n                }\n                status\n                dateCancelled\n            }\n            procedures {\n                name\n                dateCreated\n            }\n            nominalAmount\n            currency\n            stripePayment {\n                created\n                amount\n                source {\n                    brand\n                    last4\n                }\n                refunds {\n                    data {\n                        created\n                    }\n                }\n            }\n            chargeStatus\n            dateCreated\n            refundAmount\n\n        }\n    }\n`;\n\nexport class PaymentHistory extends Component {\n    componentDidMount() {\n        const userId = this.props.auth && this.props.auth.id;\n        this.props.loadPaymentHistory(paymentHistoryQuery, PAYER_ID, userId);\n    }\n\n    processPayment = (auth, payment) => {\n        const { source, created } = payment.stripePayment;\n        const { reservation, appointment, procedures } = payment;\n        let action,\n            office,\n            procedureNames,\n            eventType,\n            description,\n            startTime,\n            endTime;\n        let paymentObj = {};\n        let date = Number(created);\n        let paymentAmount = payment.nominalAmount;\n        if (payment.type === RESERVATION_PAYMENT_TYPE && reservation) {\n            action = RESERVATION_BOOKED;\n            office = reservation.office;\n            eventType = reservation;\n            startTime = eventType.startTime;\n            endTime = eventType.endTime;\n        } else if (payment.type === APPOINTMENT_PAYMENT_TYPE && appointment) {\n            action = APPOINTMENT_BOOKED;\n            office = appointment.reservation.office;\n            procedureNames = [appointment.procedure.name];\n            eventType = appointment;\n            startTime = eventType.startTime;\n            endTime = eventType.endTime;\n        } else if (payment.type === PROCEDURE_PAYMENT_TYPE && procedures) {\n            action = PROCEDURES_ASSIGNED;\n            office = {};\n            eventType = {};\n            startTime = procedures[0].dateCreated;\n            endTime = '';\n            procedureNames = procedures.map(pc => pc.name);\n        }\n\n        // Upon refund, payment.status changes to REFUNDED. It is still necessary to process such payment with description PAYMENT_MADE.\n        if (payment.status === CHARGED || payment.status === REFUNDED) {\n            description = PAYMENT_MADE;\n            paymentObj = {\n                action,\n                auth,\n                date,\n                description,\n                endTime,\n                office,\n                paymentAmount,\n                procedureNames,\n                payeeId: payment.payee.id,\n                payerId: payment.payer.id,\n                startTime,\n                source,\n                type: payment.type\n            };\n        }\n\n        return paymentObj;\n    };\n\n    processCancellation = (auth, payment) => {\n        const { source, refunds } = payment.stripePayment;\n        const { reservation, appointment, refundAmount, procedures } = payment;\n\n        let office;\n        let procedureNames;\n        let eventType;\n        let startTime;\n        let endTime;\n\n        if (payment.type === RESERVATION_PAYMENT_TYPE && reservation) {\n            office = reservation.office;\n            eventType = reservation;\n            startTime = eventType.startTime;\n            endTime = eventType.endTime;\n        } else if (payment.type === APPOINTMENT_PAYMENT_TYPE && appointment) {\n            office = appointment.reservation.office;\n            procedureNames = appointment.procedure.name;\n            eventType = appointment;\n            startTime = eventType.startTime;\n            endTime = eventType.endTime;\n        } else if (payment.type === PROCEDURE_PAYMENT_TYPE && procedures) {\n            office = {};\n            eventType = {};\n            startTime = procedures[0].dateCreated;\n            endTime = '';\n            procedureNames = procedures.map(pc => pc.name);\n        }\n\n        let cancellationObj = {};\n\n        if (eventType.status === CANCELLED) {\n            cancellationObj = {\n                action:\n                    payment.type === RESERVATION_PAYMENT_TYPE\n                        ? RESERVATION_CANCELLED_BY_DENTIST\n                        : APPOINTMENT_CANCELLED_BY_PATIENT,\n                auth,\n                endTime,\n                office,\n                procedureNames,\n                payeeId: payment.payee.id,\n                payerId: payment.payer.id,\n                startTime,\n                source,\n                type: payment.type,\n                date: refunds.data[0].created,\n                description: CANCELLED,\n                paymentAmount: -1 * refundAmount\n            };\n        }\n\n        return cancellationObj;\n    };\n\n    processPayments = payerPayments => {\n        const { auth } = this.props;\n        const concat = (x, y) => x.concat(y);\n\n        let processedPayments = payerPayments\n            .filter(payment => auth.id === payment.payer.id)\n            .map(payment => this.processPayment(auth, payment))\n            .reduce(concat, []);\n\n        processedPayments = processedPayments.concat(\n            payerPayments\n                .filter(payment => auth.id === payment.payer.id)\n                .map(payment => this.processCancellation(auth, payment))\n                .reduce(concat, [])\n        );\n\n        return processedPayments;\n    };\n\n    renderPaymentDetailsList = processedPayments => {\n        const orderedProcessedPayments = orderBy(\n            processedPayments,\n            ['date'],\n            ['desc']\n        );\n        return orderedProcessedPayments.map((payment, index) => (\n            <PaymentDetails payment={payment} key={index} />\n        ));\n    };\n\n    render() {\n        const { isFetchingPaymentHistory, payerPayments } = this.props;\n        const processedPayments = this.processPayments(payerPayments);\n        const paymentDetailsList = this.renderPaymentDetailsList(\n            processedPayments\n        );\n\n        return (\n            <StyledContainer>\n                <Box mt={5}>\n                    <Flex justifyContent=\"space-between\">\n                        <Typography fontSize={5}>Payment History</Typography>\n                    </Flex>\n                    <Box pb={3} />\n                    {!isEmpty(paymentDetailsList)\n                        ? paymentDetailsList\n                        : isFetchingPaymentHistory\n                            ? 'Loading...'\n                            : 'No payment history.'}\n                </Box>\n            </StyledContainer>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        auth: state.auth,\n        isFetchingPaymentHistory: state.payments.isFetchingPayerPayments,\n        payerPayments: state.payments.payerPayments\n    };\n}\nexport default connect(mapStateToProps, { loadPaymentHistory })(PaymentHistory);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PaymentHistory.js"],"sourceRoot":""}