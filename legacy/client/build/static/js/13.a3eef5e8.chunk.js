webpackJsonp([13],{974:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var o=t[i](r),c=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(14),l=n.n(s),u=n(1),m=n.n(u),f=n(19),p=n(41),d=n(15),h=n(324),b=n.n(h),g=n(23),v=n(323),y=(n.n(v),n(322)),E=n(20),O=n(50),w=n(42),_=n(51),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),j=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    min-height: 100vh;\n    height: 100%;\n    max-width: 1080px;\n    padding: 5em 10px;\n    margin: 0 auto;\n"],["\n    min-height: 100vh;\n    height: 100%;\n    max-width: 1080px;\n    padding: 5em 10px;\n    margin: 0 auto;\n"]),U=d.b.div(j),k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={office:{},imageUrls:[]},n}return c(t,e),x(t,[{key:"componentWillMount",value:function(){function e(){return t.apply(this,arguments)}var t=i(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Laguro - Edit Office",this.office_id=this.props.computedMatch.params.office_id,e.next=4,this.props.getOffice(this.office_id);case 4:t=this.props.office,this.setState({office:t,imageUrls:t.imageUrls}),this.props.initialize({name:t.name,equipment:t.equipment,description:t.description});case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"onSubmit",value:function(){function e(e){return t.apply(this,arguments)}var t=i(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageUrls,e.next=3,this.props.editOffice(Object.assign({},t,{imageUrls:n,id:this.office_id}));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"extractUrlToState",value:function(e){var t=e.filesUploaded,n=this.state.imageUrls;if(t.length){var i=t.map(function(e){return e.url});n=[].concat(a(n),a(i))}this.setState({imageUrls:n})}},{key:"deleteImg",value:function(e){var t=this.state.imageUrls;t.splice(e,1),this.setState({imageUrls:t})}},{key:"renderUploadedImages",value:function(){var e=this;return this.state.imageUrls.map(function(t,n){return m.a.createElement("div",{className:"edit_img_container",key:"img"+n},m.a.createElement("button",{onClick:e.deleteImg.bind(e,n),type:"button",className:"delete_img red lighten-2 btn"},m.a.createElement("i",{className:"material-icons"},"delete_forever")),m.a.createElement("img",{src:t,alt:"office"}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,a=t.submitting,i=t.error;return this.props.initialized?m.a.createElement(U,null,m.a.createElement(E.i,{container:!0},m.a.createElement(E.i,{item:!0,xs:12,sm:6},m.a.createElement("form",{onSubmit:n(this.onSubmit.bind(this))},m.a.createElement(E.i,{container:!0},m.a.createElement(E.i,{item:!0,xs:12},m.a.createElement(E.q,{fontSize:5},"Edit Dentist Office"))),m.a.createElement(O.b,{bottom:"24"}),m.a.createElement(p.a,{name:"name",label:"Office Name",tooltip:"What do you want your office to be called?",className:"col s12",component:w.g,validate:_.g}),m.a.createElement(O.b,{bottom:"16"}),m.a.createElement(p.a,{name:"description",label:"Description (optional)",component:w.g,multiline:!0,rows:2,charCount:!0,inputProps:{maxLength:500}}),Object(w.b)(this.props.description?this.props.description.length:0,500),m.a.createElement("div",{className:"row"},m.a.createElement(p.b,{className:"col s12",name:"equipment",selected:this.props.equipment,component:w.f})),m.a.createElement("div",{className:"image_upload"},m.a.createElement("label",null,"Featured Office Image",Object(w.a)("Upload images of your office. The first image will show up on search results.")),m.a.createElement("div",{className:"image_display"},this.renderUploadedImages()),m.a.createElement(b.a,{apikey:v.filestackKey,buttonText:"Upload New Image",buttonClass:"btn light-blue lighten-2",options:{accept:["image/*"],imageMin:[300,300],maxFiles:5,fromSources:["local_file_system","url","imagesearch","facebook","instagram"],transformations:{crop:{aspectRatio:y.b,force:!0}},uploadInBackground:!1,storeTo:{container:"office-photos"}},onSuccess:function(t){return e.extractUrlToState(t)}})),m.a.createElement(E.a,{pb:4}),m.a.createElement(E.i,{container:!0,justify:"space-between"},m.a.createElement(E.i,{item:!0},i&&m.a.createElement("strong",{className:"red-text"},i),m.a.createElement(E.b,{color:"secondary",type:"submit",disabled:a},m.a.createElement(E.q,{fontSize:4,fontWeight:"medium"},"Submit")))))))):m.a.createElement("div",null,"Loading...")}}]),t}(u.Component),S=function(e){var t=Object(p.e)("editOffice");return{auth:e.auth,office:e.offices.selected,equipment:t(e,"equipment"),description:t(e,"description")}};t.default=Object(p.g)({form:"editOffice"})(Object(f.b)(S,g)(k))}});
//# sourceMappingURL=13.a3eef5e8.chunk.js.map