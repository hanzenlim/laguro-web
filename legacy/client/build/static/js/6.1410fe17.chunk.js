webpackJsonp([6],{1203:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(1),i=n.n(c),u=n(26),l=n.n(u),s=n(122),f=n(20),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e,n,o,c;r(this,t);for(var u=arguments.length,p=Array(u),d=0;d<u;d++)p[d]=arguments[d];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),o.receivableList=o.props.receivable.map(function(e,t){var n=e.reservation,r=n?"Location: "+n.location:"",a="RESERVATION"===e.type?"Reservation":"Procedure";return i.a.createElement("li",{key:t},i.a.createElement(f.h,{flexDirection:"column",p:3,my:2,withborder:"true"},i.a.createElement(f.h,{justifyContent:"space-between"},i.a.createElement(f.q,{mb:3,fontWeight:"bold"},a+" Income"),i.a.createElement(f.q,null,Object(s.c)(.8*e.stripePayment.amount))),i.a.createElement(f.q,{mb:1},r),n&&i.a.createElement(f.q,null,"Time: "+l()(n.startTime).format("M/D/YY h:mm a")+" - "+l()(n.endTime).format("h:mm a"))))}),c=n,a(o,c)}return o(t,e),p(t,[{key:"render",value:function(){return this.props.receivable?i.a.createElement("ul",null,this.receivableList):i.a.createElement("div",null)}}]),t}(c.Component);t.a=d},981:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var c=t[a](o),i=c.value}catch(e){return void n(e)}if(!c.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(e){return{auth:e.auth}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(14),s=n.n(l),f=n(1),p=n.n(f),d=n(19),h=n(988),m=n.n(h),y=n(15),b=n(1203),v=n(323),w=(n.n(v),n(23)),E=n(326),j=n(24),x=n(122),g=n(33),O=n(25),k=n(20),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=i(["\n    max-width: 800px;\n\n    @media screen and (min-width: 800px) {\n        margin: auto;\n    }\n"],["\n    max-width: 800px;\n\n    @media screen and (min-width: 800px) {\n        margin: auto;\n    }\n"]),R=i(["\n    max-width: 300px;\n"],["\n    max-width: 300px;\n"]),A=i(["\n    min-width: 215px;\n    min-height: 85px;\n\n    @media screen and (max-width: 600px) {\n        min-width: 175px;\n    }\n"],["\n    min-width: 215px;\n    min-height: 85px;\n\n    @media screen and (max-width: 600px) {\n        min-width: 175px;\n    }\n"]),I="\n    query ($userId: String!) {\n        getUserAccountReceivable(userId: $userId) {\n            "+g.h+"\n        }\n    }\n",_=Object(y.b)(k.a)(P),U=Object(y.b)(k.a)(R),q=Object(y.b)(k.h)(A),S=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:null,receivable:null},n.payoutUser=n.payoutUser.bind(n),n.loadAccountReceivable=n.loadAccountReceivable.bind(n),n.loadPayout(),n.loadAccountReceivable(),n}return c(t,e),C(t,[{key:"loadPayout",value:function(){function e(){return t.apply(this,arguments)}var t=r(s.a.mark(function e(){var t,n,r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth,n=this.props.location,r=m.a.parse(n.search),a=r.code,e.next=6,E.a.get(t.id,j.B);case 6:if(o=e.sent,!a||o.payoutAccountId){e.next=11;break}return e.next=10,E.a.addPayoutAccount(o.id,a);case 10:o=e.sent;case 11:this.setState({user:o});case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadAccountReceivable",value:function(){function e(){return t.apply(this,arguments)}var t=r(s.a.mark(function e(){var t,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth,e.next=3,Object(O.a)(I,{userId:t.id});case 3:n=e.sent,r=n.data.getUserAccountReceivable,this.setState({receivable:r});case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"payoutUser",value:function(){function e(){return t.apply(this,arguments)}var t=r(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth,e.next=3,Object(O.a)("\n    mutation ($userId: String!) {\n        payoutUser(userId: $userId)\n    }\n",{userId:t.id});case 3:n=e.sent,alert("Paid out "+Object(x.c)(n.data.payoutUser)),this.loadAccountReceivable();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this.state,t=e.user,n=e.receivable;if(!t||!n)return p.a.createElement("div",null);for(var r=0,a=0,o=0;o<n.length;o++){var c=n[o].stripePayment.amount;r+=c,n[o].chargeStatus===j.h&&(a+=c)}var i=p.a.createElement(k.a,{mb:1},t.payoutLoginLink?p.a.createElement("a",{href:t.payoutLoginLink},p.a.createElement(k.b,{my:1,fullWidth:!0,color:"primary"},"Go to Stripe")):p.a.createElement("a",{href:"https://connect.stripe.com/express/oauth/authorize?client_id="+v.stripeExpressClientKey},p.a.createElement(k.b,{my:1,fullWidth:!0,color:"primary"},"Create Stripe account"))),u=p.a.createElement(k.a,null,a>0?p.a.createElement(k.b,{fullWidth:!0,color:"secondary",tooltip:"Click here to retreive all your available funds",onClick:this.payoutUser},"Payout available"):p.a.createElement(k.b,{fullWidth:!0,color:"secondary",tooltip:"No funds available. Funds typically take 7 business days to clear",disabled:!0,onClick:this.payoutUser},"Payout unavailable")),l=p.a.createElement(q,{flexDirection:"column",justifyContent:"space-between"},p.a.createElement(k.h,{justifyContent:"space-between"},p.a.createElement(k.q,null,"Available:"),p.a.createElement(k.q,null,Object(x.c)(.8*a))),p.a.createElement(k.h,{justifyContent:"space-between"},p.a.createElement(k.q,null,"Pending:"),p.a.createElement(k.q,null,Object(x.c)(.8*(r-a)))),p.a.createElement(k.h,{justifyContent:"space-between"},p.a.createElement(k.q,null,"Total: "),p.a.createElement(k.q,null,Object(x.c)(.8*r))));return p.a.createElement(_,{m:3,py:4},p.a.createElement(k.q,{fontSize:5,fontWeight:"bold"},"Laguro Balance"),p.a.createElement(k.h,{justifyContent:"space-between",alignItems:"center",my:3},p.a.createElement(U,null,i,t&&t.payoutAccountId&&u),p.a.createElement(k.a,{ml:2,height:"100%"},l)),p.a.createElement(b.a,{receivable:n}))}}]),t}(f.Component);t.default=Object(d.b)(u,w)(S)},988:function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[o(t,e),"[",r,"]"].join(""):[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")};case"bracket":return function(t,n){return null===n?o(t,e):[o(t,e),"[]=",o(n,e)].join("")};default:return function(t,n){return null===n?o(t,e):[o(t,e),"=",o(n,e)].join("")}}}function a(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);void 0===r[e]&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===r[e]?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function o(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===typeof e?c(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}function i(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){t=s({arrayFormat:"none"},t);var n=a(t),r=Object.create(null);return"string"!==typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:f(o),n(f(a),o,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e},Object.create(null))):r}var l=n(990),s=n(121),f=n(991);t.extract=i,t.parse=u,t.stringify=function(e,t){t=s({encode:!0,strict:!0,arrayFormat:"none"},t),!1===t.sort&&(t.sort=function(){});var n=r(t);return e?Object.keys(e).sort(t.sort).map(function(r){var a=e[r];if(void 0===a)return"";if(null===a)return o(r,t);if(Array.isArray(a)){var c=[];return a.slice().forEach(function(e){void 0!==e&&c.push(n(r,e,c.length))}),c.join("&")}return o(r,t)+"="+o(a,t)}).filter(function(e){return e.length>0}).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(i(e),t)}}},990:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},991:function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],r(n),r(a))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(c),n=1;n<t.length;n++)e=r(t,n).join(""),t=e.match(c);return e}}function o(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="\ufffd";for(var o=Object.keys(t),c=0;c<o.length;c++){var u=o[c];e=e.replace(new RegExp(u,"g"),t[u])}return e}var c=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return o(e)}}}});
//# sourceMappingURL=6.1410fe17.chunk.js.map